import{r as c,a as ee}from"./vendor-SIwY82C9.js";import{L as A,S as te,X as se,M as _,C as D,a as b,b as k,c as N,d as $,e as O,W as S,f as E,H as B,D as re,G as ae,E as ne,R as le,g as oe,h as ie,T as ce,i as de,j as xe,k as me}from"./icons-B4SsmRUq.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();var V={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=c,he=Symbol.for("react.element"),ge=Symbol.for("react.fragment"),fe=Object.prototype.hasOwnProperty,pe=ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ye={key:!0,ref:!0,__self:!0,__source:!0};function q(t,s,n){var a,r={},l=null,i=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)fe.call(s,a)&&!ye.hasOwnProperty(a)&&(r[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)r[a]===void 0&&(r[a]=s[a]);return{$$typeof:he,type:t,key:l,ref:i,props:r,_owner:pe.current}}R.Fragment=ge;R.jsx=q;R.jsxs=q;V.exports=R;var e=V.exports,K,T=ee;K=T.createRoot,T.hydrateRoot;const z="3f2c8bf0ace7643cdaf5e1bc434c27d6",J="https://api.openweathermap.org/data/2.5",we="https://api.openweathermap.org/geo/1.0",je=async(t=null,s=null,n=null)=>{let a=`${J}/weather?appid=${z}&units=metric`;if(t)a+=`&q=${encodeURIComponent(t)}`;else if(s!==null&&n!==null)a+=`&lat=${s}&lon=${n}`;else throw new Error("Either city name or coordinates must be provided");try{const r=await fetch(a);if(!r.ok)throw r.status===404?new Error("City not found. Please check the spelling and try again."):r.status===401?new Error("Invalid API key. Please check your OpenWeatherMap API configuration."):r.status===429?new Error("Too many requests. Please try again later."):new Error(`Failed to fetch weather data: ${r.statusText}`);const l=await r.json();return ke(l)}catch(r){throw r.message.includes("Failed to fetch")?new Error("Network error. Please check your internet connection and try again."):r}},be=async(t=null,s=null,n=null)=>{let a=`${J}/forecast?appid=${z}&units=metric`;if(t)a+=`&q=${encodeURIComponent(t)}`;else if(s!==null&&n!==null)a+=`&lat=${s}&lon=${n}`;else throw new Error("Either city name or coordinates must be provided");try{const r=await fetch(a);if(!r.ok)throw r.status===404?new Error("City not found for forecast data."):new Error(`Failed to fetch forecast data: ${r.statusText}`);const l=await r.json();return ve(l)}catch(r){throw r.message.includes("Failed to fetch")?new Error("Network error while fetching forecast."):r}},Ne=async t=>{if(!t||t.trim().length<2)return[];const s=`${we}/direct?q=${encodeURIComponent(t.trim())}&limit=5&appid=${z}`;try{const n=await fetch(s);if(!n.ok)throw new Error("Failed to search cities");return(await n.json()).map(r=>({name:r.name,country:r.country,state:r.state,lat:r.lat,lon:r.lon,displayName:r.state?`${r.name}, ${r.state}, ${r.country}`:`${r.name}, ${r.country}`}))}catch(n){return console.error("Error searching cities:",n),[]}},ke=t=>({id:t.id,name:t.name,country:t.sys.country,coordinates:{lat:t.coord.lat,lon:t.coord.lon},weather:{main:t.weather[0].main,description:t.weather[0].description,icon:t.weather[0].icon,id:t.weather[0].id},temperature:{current:Math.round(t.main.temp),feelsLike:Math.round(t.main.feels_like),min:Math.round(t.main.temp_min),max:Math.round(t.main.temp_max)},humidity:t.main.humidity,pressure:t.main.pressure,visibility:t.visibility?Math.round(t.visibility/1e3):null,wind:{speed:t.wind.speed,direction:t.wind.deg,gust:t.wind.gust||null},clouds:t.clouds.all,sunrise:t.sys.sunrise*1e3,sunset:t.sys.sunset*1e3,timezone:t.timezone,lastUpdated:Date.now()}),ve=t=>{const s=[],n=new Set;return t.list.forEach(a=>{const r=new Date(a.dt*1e3),l=r.toISOString().split("T")[0],i=r.getHours();n.has(l)||i!==12||(n.add(l),s.push({date:l,timestamp:a.dt*1e3,weather:{main:a.weather[0].main,description:a.weather[0].description,icon:a.weather[0].icon,id:a.weather[0].id},temperature:{min:Math.round(a.main.temp_min),max:Math.round(a.main.temp_max),current:Math.round(a.main.temp)},humidity:a.main.humidity,wind:{speed:a.wind.speed,direction:a.wind.deg},clouds:a.clouds.all,pop:Math.round(a.pop*100)}))}),{city:{name:t.city.name,country:t.city.country,coordinates:{lat:t.city.coord.lat,lon:t.city.coord.lon},timezone:t.city.timezone,sunrise:t.city.sunrise*1e3,sunset:t.city.sunset*1e3},forecasts:s.slice(0,3)}},Se=10*60*1e3,Y=new Map,Q=(t,s,n,a)=>s?`${t}-${s}`:`${t}-${n}-${a}`,F=(t,s=null,n=null,a=null)=>{const r=Q(t,s,n,a),l=Y.get(r);return l&&Date.now()-l.timestamp<Se?l.data:null},U=(t,s,n=null,a=null,r=null)=>{const l=Q(t,n,a,r);Y.set(l,{data:s,timestamp:Date.now()})},Ee=()=>{const[t,s]=c.useState(null),[n,a]=c.useState(null),[r,l]=c.useState(!1),[i,d]=c.useState(null),m=c.useCallback(async(p=null,h=null,x=null)=>{const y=F("weather",p,h,x),w=F("forecast",p,h,x);if(y&&w){s({...y,forecast:w}),d(null);return}l(!0),d(null);try{const[j,v]=await Promise.all([je(p,h,x),be(p,h,x)]);U("weather",j,p,h,x),U("forecast",v,p,h,x);const C={...j,forecast:v};s(C),a(v),d(null)}catch(j){console.error("Error fetching weather data:",j),d(j.message),s(null),a(null)}finally{l(!1)}},[]),f=c.useCallback(async()=>{if(t){const{coordinates:p}=t;await m(null,p.lat,p.lon)}},[t,m]),u=c.useCallback(()=>{s(null),a(null),d(null)},[]);return{weatherData:t,forecastData:n,loading:r,error:i,fetchWeather:m,refreshWeather:f,clearWeatherData:u}},Ce=()=>{const[t,s]=c.useState([]),[n,a]=c.useState(!1),[r,l]=c.useState(null),i=c.useCallback(async m=>{if(!m||m.trim().length<2){s([]);return}a(!0),l(null);try{const f=await Ne(m);s(f),l(null)}catch(f){console.error("Error searching cities:",f),l(f.message),s([])}finally{a(!1)}},[]),d=c.useCallback(()=>{s([]),l(null)},[]);return{cities:t,loading:n,error:r,searchCityByName:i,clearSearch:d}},W=(t,s="C")=>`${Math.round(t)}°${s}`,De=(t,s={})=>{const n=new Date(t),a={weekday:"long",year:"numeric",month:"long",day:"numeric",...s};return n.toLocaleDateString("en-US",a)},H=(t,s={})=>{const n=new Date(t),a={hour:"2-digit",minute:"2-digit",...s};return n.toLocaleTimeString("en-US",a)},Le=t=>{const s=new Date(t),n=new Date,a=new Date(n);return a.setDate(a.getDate()+1),s.toDateString()===n.toDateString()?"Today":s.toDateString()===a.toDateString()?"Tomorrow":s.toLocaleDateString("en-US",{weekday:"short"})},$e=t=>{const s=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],n=Math.round(t/22.5)%16;return s[n]},We=(t,s="kmh")=>{switch(s){case"kmh":return Math.round(t*3.6);case"mph":return Math.round(t*2.237);default:return Math.round(t)}},Ie=t=>{const{weather:s,temperature:n,wind:a,humidity:r}=t,l=[];return n.current<0?l.push("🧥 Bundle up! It's freezing outside."):n.current<10?l.push("🧥 Wear a warm jacket."):n.current>30&&l.push("☀️ Stay hydrated and wear sunscreen."),(s.main==="Rain"||s.main==="Drizzle")&&l.push("☔ Don't forget your umbrella!"),s.main==="Snow"&&l.push("❄️ Drive carefully, roads may be slippery."),a.speed>10&&l.push("💨 It's quite windy today!"),r>80&&l.push("💧 High humidity - stay cool and hydrated."),l},Me=(t,s)=>{let n;return function(...r){const l=()=>{clearTimeout(n),t(...r)};clearTimeout(n),n=setTimeout(l,s)}},P=()=>"geolocation"in navigator,Oe=t=>{const n=Date.now()-t,a=Math.floor(n/(1e3*60)),r=Math.floor(n/(1e3*60*60));return a<1?"Just now":a===1?"1 minute ago":a<60?`${a} minutes ago`:r===1?"1 hour ago":r<24?`${r} hours ago`:De(t,{month:"short",day:"numeric"})},X=t=>t.replace(/\w\S*/g,s=>s.charAt(0).toUpperCase()+s.substr(1).toLowerCase()),Re=({onCitySelect:t,placeholder:s="Search for cities..."})=>{const[n,a]=c.useState(""),[r,l]=c.useState(!1),[i,d]=c.useState(-1),m=c.useRef(null),f=c.useRef(null),{cities:u,loading:p,error:h,searchCityByName:x,clearSearch:y}=Ce(),w=c.useRef(Me(o=>{x(o)},300)).current;c.useEffect(()=>{n.trim().length>=2?(w(n.trim()),l(!0)):(y(),l(!1)),d(-1)},[n,w,y]),c.useEffect(()=>{const o=g=>{m.current&&!m.current.contains(g.target)&&(l(!1),d(-1))};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]);const j=o=>{const g=o.target.value;a(g),g.length===0&&l(!1)},v=o=>{a(o.name),l(!1),d(-1),t(o)},C=()=>{var o,g;a(""),l(!1),d(-1),y(),(g=(o=m.current)==null?void 0:o.querySelector("input"))==null||g.focus()},L=o=>{if(!r||u.length===0){o.key==="Escape"&&(l(!1),d(-1));return}switch(o.key){case"ArrowDown":o.preventDefault(),d(g=>g<u.length-1?g+1:0);break;case"ArrowUp":o.preventDefault(),d(g=>g>0?g-1:u.length-1);break;case"Enter":o.preventDefault(),i>=0&&i<u.length&&v(u[i]);break;case"Escape":l(!1),d(-1);break}};return c.useEffect(()=>{if(i>=0&&f.current){const o=f.current.children[i];o&&o.scrollIntoView({behavior:"smooth",block:"nearest"})}},[i]),e.jsxs("div",{className:"relative w-full max-w-md mx-auto",ref:m,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:p?e.jsx(A,{className:"h-5 w-5 text-gray-400 animate-spin"}):e.jsx(te,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:n,onChange:j,onKeyDown:L,placeholder:s,className:"input-field pl-12 pr-12",autoComplete:"off",spellCheck:"false"}),n&&e.jsx("button",{onClick:C,className:"absolute inset-y-0 right-0 pr-4 flex items-center hover:text-gray-600 dark:hover:text-gray-300 transition-colors",type:"button",children:e.jsx(se,{className:"h-5 w-5 text-gray-400"})})]}),r&&e.jsx("div",{className:"absolute z-50 w-full mt-2 glass-effect rounded-xl border border-white/20 dark:border-gray-700/20 shadow-xl max-h-60 overflow-y-auto",children:p&&u.length===0?e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(A,{className:"h-5 w-5 animate-spin mx-auto mb-2"}),"Searching cities..."]}):h?e.jsx("div",{className:"p-4 text-center text-red-500 dark:text-red-400",children:e.jsxs("p",{className:"text-sm",children:["Error: ",h]})}):u.length>0?e.jsx("ul",{ref:f,className:"py-2",children:u.map((o,g)=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>v(o),className:`w-full px-4 py-3 text-left hover:bg-white/20 dark:hover:bg-gray-700/20 transition-colors flex items-center gap-3 ${g===i?"bg-white/20 dark:bg-gray-700/20":""}`,children:[e.jsx(_,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:o.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:o.state?`${o.state}, ${o.country}`:o.country})]})]})},`${o.name}-${o.country}-${g}`))}):n.trim().length>=2?e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsxs("p",{className:"text-sm",children:['No cities found for "',n,'"']}),e.jsx("p",{className:"text-xs mt-1",children:"Try checking the spelling or use a different search term"})]}):null})]})},Z=({icon:t,size:s=24,className:n="",animate:a=!1,weatherId:r=null})=>{const i=((u,p)=>{const h={"01d":O,"01n":O,"02d":$,"02n":$,"03d":D,"03n":D,"04d":$,"04n":$,"09d":N,"09n":N,"10d":N,"10n":N,"11d":k,"11n":k,"13d":b,"13n":b,"50d":D,"50n":D},x={200:k,201:k,202:k,210:k,211:k,212:k,221:k,230:k,231:k,232:k,300:E,301:E,302:E,310:E,311:E,312:E,313:E,314:E,321:E,500:N,501:N,502:N,503:N,504:N,511:b,520:N,521:N,522:N,531:N,600:b,601:b,602:b,611:b,612:b,613:b,615:b,616:b,620:b,621:b,622:b,701:S,711:S,721:S,731:S,741:D,751:S,761:S,762:D,771:S,781:S,800:O,801:$,802:D,803:$,804:$};return h[u]||x[p]||D})(t,r),d=u=>{const p=u==null?void 0:u.endsWith("d");return t!=null&&t.startsWith("01")?p?"text-yellow-500":"text-blue-200":t!=null&&t.startsWith("02")||t!=null&&t.startsWith("03")?"text-gray-400 dark:text-gray-300":t!=null&&t.startsWith("04")?"text-gray-500 dark:text-gray-400":t!=null&&t.startsWith("09")||t!=null&&t.startsWith("10")?"text-blue-500 dark:text-blue-400":t!=null&&t.startsWith("11")?"text-purple-500 dark:text-purple-400":t!=null&&t.startsWith("13")?"text-blue-200 dark:text-blue-100":t!=null&&t.startsWith("50")?"text-gray-400 dark:text-gray-300":"text-gray-500 dark:text-gray-400"},m=a?"animate-float":"",f=d(t);return e.jsx(i,{size:s,className:`${f} ${m} ${n} weather-icon-glow`})},Pe=({forecastData:t})=>!t||!t.forecasts||t.forecasts.length===0?null:e.jsxs("div",{className:"weather-card",children:[e.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-200",children:"3-Day Forecast"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:t.forecasts.map((s,n)=>e.jsxs("div",{className:"glass-effect rounded-xl p-4 text-center hover:bg-white/30 dark:hover:bg-gray-700/30 transition-all duration-200",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:Le(s.timestamp)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(s.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(Z,{icon:s.weather.icon,weatherId:s.weather.id,size:48,animate:!0})}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:X(s.weather.description)})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"High"}),e.jsx("p",{className:"text-lg font-bold text-red-500 dark:text-red-400",children:W(s.temperature.max)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Low"}),e.jsx("p",{className:"text-lg font-bold text-blue-500 dark:text-blue-400",children:W(s.temperature.min)})]})]})}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Humidity:"}),e.jsxs("span",{className:"font-medium",children:[s.humidity,"%"]})]}),s.pop>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rain Chance:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:[s.pop,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Wind:"}),e.jsxs("span",{className:"font-medium",children:[Math.round(s.wind.speed*3.6)," km/h"]})]})]})]},`${s.date}-${n}`))}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/20 dark:border-gray-700/20",children:e.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400",children:"Forecast data updates every 3 hours • Powered by OpenWeatherMap"})})]}),Ae=({weatherData:t,city:s,onToggleFavorite:n,isFavorite:a})=>{const[r,l]=c.useState(!1);if(!t)return null;const{name:i,country:d,weather:m,temperature:f,humidity:u,pressure:p,visibility:h,wind:x,clouds:y,sunrise:w,sunset:j,lastUpdated:v,forecast:C}=t,L=Ie(t),o=$e(x.direction),g=We(x.speed,"kmh");return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"weather-card",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"h-5 w-5 text-blue-500 dark:text-blue-400"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-gray-800 dark:text-gray-200",children:i}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[d," ",(s==null?void 0:s.isCurrentLocation)&&"• Current Location"]})]})]}),e.jsx("button",{onClick:n,className:`p-2 rounded-full transition-all duration-200 ${a?"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-200 dark:hover:bg-red-900/40":"bg-gray-100 dark:bg-gray-800/20 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700/40"}`,title:a?"Remove from favorites":"Add to favorites",children:e.jsx(B,{size:20,className:a?"fill-current":""})})]}),e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Z,{icon:m.icon,weatherId:m.id,size:80,animate:!0,className:"mb-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:X(m.description)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsx("span",{className:"text-5xl lg:text-6xl font-bold text-gray-800 dark:text-gray-200",children:f.current}),e.jsx("span",{className:"text-2xl text-gray-600 dark:text-gray-400",children:"°C"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Feels like ",W(f.feelsLike)]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm",children:[e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:["↓ ",W(f.min)]}),e.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["↑ ",W(f.max)]})]})]})]}),L.length>0&&e.jsxs("div",{className:"glass-effect rounded-lg p-4 mb-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Weather Advice"}),e.jsx("ul",{className:"space-y-1",children:L.slice(0,2).map((M,I)=>e.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-400",children:M},I))})]})]}),e.jsx("div",{className:"lg:w-80",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(re,{className:"h-6 w-6 text-blue-500 dark:text-blue-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Humidity"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:[u,"%"]})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(S,{className:"h-6 w-6 text-green-500 dark:text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wind"}),e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:g}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["km/h ",o]})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(ae,{className:"h-6 w-6 text-purple-500 dark:text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pressure"}),e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:p}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"hPa"})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(ne,{className:"h-6 w-6 text-indigo-500 dark:text-indigo-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Visibility"}),e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:h||"N/A"}),h&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"km"})]})]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200/20 dark:border-gray-700/20",children:e.jsxs("button",{onClick:()=>l(!r),className:"w-full flex items-center justify-between text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[e.jsx("span",{className:"font-medium",children:r?"Hide Details":"Show More Details"}),e.jsx(le,{className:`h-4 w-4 transition-transform duration-200 ${r?"rotate-180":""}`})]})}),r&&e.jsxs("div",{className:"mt-6 space-y-6 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"glass-effect rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(oe,{className:"h-5 w-5 text-orange-500 dark:text-orange-400"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Sunrise"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:H(w)})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ie,{className:"h-5 w-5 text-orange-600 dark:text-orange-500"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Sunset"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200",children:H(j)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(ce,{className:"h-6 w-6 text-red-500 dark:text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Feels Like"}),e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:W(f.feelsLike)})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx("div",{className:"h-6 w-6 mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"☁️"})}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clouds"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:[y,"%"]})]}),x.gust&&e.jsxs("div",{className:"glass-effect rounded-lg p-4 text-center",children:[e.jsx(S,{className:"h-6 w-6 text-green-600 dark:text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Wind Gusts"}),e.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:Math.round(x.gust*3.6)}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"km/h"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200/20 dark:border-gray-700/20",children:e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last updated: ",Oe(v)]})]})})]}),C&&e.jsx(Pe,{forecastData:C})]})},_e=({size:t="medium",text:s="Loading...",className:n=""})=>{const a={small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"},r={small:"text-sm",medium:"text-base",large:"text-lg"};return e.jsxs("div",{className:`flex flex-col items-center justify-center gap-3 ${n}`,children:[e.jsx(A,{className:`${a[t]} animate-spin text-blue-500 dark:text-blue-400`}),s&&e.jsx("p",{className:`${r[t]} text-gray-600 dark:text-gray-400 animate-pulse`,children:s})]})},G=(t,s)=>{const[n,a]=c.useState(()=>{if(typeof window>"u")return s;try{const i=window.localStorage.getItem(t);return i?JSON.parse(i):s}catch(i){return console.warn(`Error reading localStorage key "${t}":`,i),s}}),r=i=>{try{const d=i instanceof Function?i(n):i;a(d),typeof window<"u"&&window.localStorage.setItem(t,JSON.stringify(d))}catch(d){console.warn(`Error setting localStorage key "${t}":`,d)}};return c.useEffect(()=>{if(typeof window>"u")return;const i=d=>{if(d.key===t&&d.newValue!==null)try{a(JSON.parse(d.newValue))}catch(m){console.warn(`Error parsing localStorage key "${t}" change:`,m)}};return window.addEventListener("storage",i),()=>window.removeEventListener("storage",i)},[t]),[n,r,()=>{try{a(s),typeof window<"u"&&window.localStorage.removeItem(t)}catch(i){console.warn(`Error removing localStorage key "${t}":`,i)}}]},ze=()=>{const[t,s]=c.useState(null),[n,a]=c.useState(!1),[r,l]=c.useState(null),i=c.useCallback(()=>{if(!P()){l("Geolocation is not supported by this browser.");return}a(!0),l(null);const u={enableHighAccuracy:!0,timeout:1e4,maximumAge:5*60*1e3},p=x=>{const{latitude:y,longitude:w,accuracy:j}=x.coords;s({latitude:y,longitude:w,accuracy:j,timestamp:Date.now()}),a(!1),l(null)},h=x=>{a(!1);let y="Unable to retrieve your location.";switch(x.code){case x.PERMISSION_DENIED:y="Location access denied. Please enable location services and refresh the page.";break;case x.POSITION_UNAVAILABLE:y="Location information is unavailable. Please try again.";break;case x.TIMEOUT:y="Location request timed out. Please try again.";break;default:y=`An unknown error occurred: ${x.message}`;break}l(y)};navigator.geolocation.getCurrentPosition(p,h,u)},[]),d=c.useCallback(()=>{if(!P())return l("Geolocation is not supported by this browser."),null;const u={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4};return navigator.geolocation.watchPosition(h=>{const{latitude:x,longitude:y,accuracy:w}=h.coords;s({latitude:x,longitude:y,accuracy:w,timestamp:Date.now()}),l(null)},h=>{let x="Unable to watch your location.";switch(h.code){case h.PERMISSION_DENIED:x="Location access denied.";break;case h.POSITION_UNAVAILABLE:x="Location information is unavailable.";break;case h.TIMEOUT:x="Location request timed out.";break}l(x)},u)},[]),m=c.useCallback(u=>{u&&navigator.geolocation&&navigator.geolocation.clearWatch(u)},[]),f=c.useCallback(()=>{s(null),l(null)},[]);return{location:t,loading:n,error:r,getCurrentLocation:i,watchLocation:d,clearWatch:m,clearLocation:f,isSupported:P()}};function Te(){const[t,s]=G("darkMode",!1),[n,a]=G("favoriteCities",[]),[r,l]=c.useState(null),[i,d]=c.useState(!1),{location:m,loading:f,error:u,getCurrentLocation:p}=ze(),{weatherData:h,loading:x,error:y,fetchWeather:w}=Ee();c.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),c.useEffect(()=>{m&&!r&&(w(null,m.latitude,m.longitude),l({name:"Your Location",lat:m.latitude,lon:m.longitude,isCurrentLocation:!0}))},[m,r,w]);const j=o=>{l(o),w(o.name,o.lat,o.lon)},v=o=>{a(g=>g.some(I=>I.name===o.name)?g.filter(I=>I.name!==o.name):[...g,o])},C=o=>{a(g=>g.filter(M=>M.name!==o))},L=()=>{p()};return e.jsx("div",{className:"min-h-screen p-2 sm:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-3",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold gradient-text text-shadow",children:"Weather Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1 text-base sm:text-lg",children:"Real-time weather data and forecasts"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center",children:[e.jsxs("button",{onClick:L,disabled:f,className:"btn-secondary flex items-center gap-1 text-sm sm:text-base px-2 sm:px-3 lg:px-4",title:"Get current location weather",children:[e.jsx(_,{size:10,className:"sm:size-12 lg:size-10"}),f?"Locating...":"My Location"]}),e.jsxs("button",{onClick:()=>d(!i),className:`btn-secondary flex items-center gap-1 text-sm sm:text-base px-2 sm:px-3 lg:px-4 ${n.length>0?"":"opacity-50 cursor-not-allowed"}`,disabled:n.length===0,children:[e.jsx(B,{size:10,className:`sm:size-12 lg:size-10 ${i?"fill-current":""}`}),"Favorites (",n.length,")"]}),e.jsx("button",{onClick:()=>s(!t),className:"btn-secondary p-2 sm:p-2.5 lg:p-3",title:"Toggle dark mode",children:t?e.jsx(O,{size:10,className:"sm:size-12 lg:size-10"}):e.jsx(xe,{size:10,className:"sm:size-12 lg:size-10"})})]})]}),u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Location Error:"}),e.jsx("p",{className:"text-xs sm:text-sm",children:u})]}),y&&e.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-700 dark:text-red-300",children:[e.jsx("p",{className:"font-medium text-sm sm:text-base",children:"Weather Error:"}),e.jsx("p",{className:"text-xs sm:text-sm",children:y})]}),e.jsx("div",{className:"mb-6",children:e.jsx(Re,{onCitySelect:j,placeholder:"Search for cities..."})}),i&&n.length>0&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"weather-card animate-slide-up",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Favorite Cities"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:n.map(o=>e.jsxs("div",{className:"relative group",children:[e.jsxs("div",{className:"glass-effect rounded-lg p-3 cursor-pointer hover:bg-white/30 dark:hover:bg-gray-700/30 transition-all duration-200",onClick:()=>j(o),children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg text-gray-800 dark:text-gray-200",children:o.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:o.country})]}),e.jsx("button",{onClick:g=>{g.stopPropagation(),C(o.name)},className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-red-600",title:"Remove from favorites",children:e.jsx(me,{size:12,className:"sm:size-8"})})]},o.name))})]})}),e.jsx("main",{className:"space-y-6",children:x?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(_e,{size:"large"})}):h?e.jsx(Ae,{weatherData:h,city:r,onToggleFavorite:()=>v(r),isFavorite:n.some(o=>o.name===(r==null?void 0:r.name))}):e.jsx("div",{className:"text-center py-10",children:e.jsxs("div",{className:"weather-card max-w-md mx-auto",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-3",children:"🌤️"}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-3 text-gray-800 dark:text-gray-200",children:"Welcome to Weather Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 text-sm sm:text-base",children:"Search for a city or use your current location to get started"}),e.jsx("button",{onClick:L,disabled:f,className:"btn-primary text-sm sm:text-base px-3 sm:px-4",children:f?"Getting Location...":"Use My Location"})]})})}),e.jsx("footer",{className:"mt-12 text-center text-gray-500 dark:text-gray-400",children:e.jsx("p",{className:"text-xs sm:text-sm",children:"Made with ❤️ using React, Vite & OpenWeatherMap API"})})]})})}K(document.getElementById("root")).render(e.jsx(c.StrictMode,{children:e.jsx(Te,{})}));
